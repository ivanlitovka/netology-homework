# Домашнее задание к занятию "Протокол OSPF. Метрика, зоны и суммаризация"
------


### Задание 1

Исходя из топологии на картинке, определите тип всех маршрутизаторов (internal, backbone, ABR).  
Файл с изначальной конфигурацией маршрутизаторов можете найти [здесь]( https://github.com/netology-code/drut-homeworks/blob/main/4-03/homework_4_3_routers_config.txt ) - 

![image](https://user-images.githubusercontent.com/51816695/151556518-a92a6a1c-286d-439e-8388-de17db425199.png)


*Приведите список маршрутизаторов R1, R2, R3, R4, R5, R6, R7 c указанием их типов.*

---

   
|Router|Тип|
|---|---|
|R1, R2, R3, R5|backbone|
|R3, R2|ABR|
|R5, R4|ASBR|
|R5, R1, R6, R7|internal|



### Задание 2

По топологии из Задания 1, определите метрику маршрута на маршрутизаторе R1 для сети 4.4.4.4/24 маршрутизатора R4 через путь R1-R2-R4 и R1-R3-R4. 

1) Какая метрика будет у данных маршрутов?  
   
| Маршрут | Метрика |  
|---------|---------|   
|R1-R2-R4 | 3       |  
|R1-R3-R4 | 3       |  

2) Какой или какие из этих маршрутов будут установлены в таблицу маршрутизатора R1? 
Для оптимальной передачи трафика, маршрут до 4.4.4.4 должен проходить только через R1-R3-R4. 

Установлены будут оба маршрута, и маршрут R1-R2-R4 не оптимальный если OSPF настроен по дефолту. Необходимо изменить **auto-cost reference-bandwidth 1000** на всех роутерах и тогда R1-R2-R4 будет отброшен из таблицы маршрутизации т.к. ьудет иметь метрику 30 против 21 другого маршрута. Хотя у нас есть еще 10GB соединение возможно значение надо ставить **10000**

3) Является ли ситуация в таблице маршрутизации оптимальной? Если нет, то каким образом можно исправить ситуацию и на каких маршрутизаторах необходимо внести изменения?
На маршрутизаторах сделана конфигурация для анонса сети и установления соседства. Дополнительные настройки по умолчанию.

Ответ в п.2

*Приведите ответы на вопросы в свободной форме. В вопросе 3, если необходима конфигурация на маршрутизаторах, то приведите команды, которые необходимо применить и на каких маршрутизаторах.*

### Задание 3 

По топологии из Задания 1, сеть 172.16.1.0/24 анонсируется в OSPF через R4 и R5. 
1) Какой путь или пути ( R1-R2-R5, R1-R2-R4, R1-R3-R4)  выберет R1 для данного маршрута? Почему?

Выберет маршрут через R5 т.к. при выборе маршрута из нескольких предпочтение впервую очередь отдается маршруту из **internal** роутеров

2) Какие метрики для данного маршрута будет у R1 для данного маршрута через каждый путь? Конфигурация по умолчанию.

|Маршрут|Метрика|
|---|---|
|R1-R2-R5|22
|R1-R2-R4|4
|R1-R2-R4|4

3) Какие изменения конфигурации необходимо сделать, чтоб правильно учитывалась пропускная способность каждого линка на этих путях? 
**auto-cost reference-bandwidth 10000**
Пересчет маршрутов будет, но предпочтение останется для **internal** маршрута

Ситуация не измениться

4) После того, как будет учитываться правильно каждый линк, изменится ли ситуация с выбором маршрута на R1? Почему?

Ситуация не измениться. Или можно за счет **cost** портов все исправить? 

*Приведите ответы на вопросы в свободной форме. В вопросе 3, напишите точно какую/какие команды необходимо использовать на маршрутизаторах*

## Дополнительные задания (со звездочкой*)

Эти задания дополнительные (не обязательные к выполнению) и никак не повлияют на получение вами зачета по этому домашнему заданию. Вы можете их выполнить, если хотите глубже и/или шире разобраться в материале.

### Задание 4*

По топологии из Задания 1, сеть 7.7.7.7/24 анонсируется маршрутизатором R7 в OSPF. Информацию о данном маршруте маршрутизатору R1 будут передавать маршрутизаторы R7-R6-R3.
Напишите, какие типы LSA каждый из маршрутизаторов будет использовать для передачи данной информации? Почему?

R6, R7 будут передавать сообщения 1го типа о LSA внутри Зоны 7, R3 передаст сообщение 3го типа, т.к. является ABR и передает информацию о маршрутах вне локальной зоны

*Приведите ответы на вопросы в свободной форме.*

### Задание 5*

Конфигурация типов линков в топологии из Задания 1, задана по умолчанию. У каких линков вы бы изменили тип линка для болеее оптимальной работы протокола OSPF? 

Везде где маршрутизатор соединен с маршрутизаторам можно перевести тип линка в peer-to-peer, R1-R2-R3 оставитьв броадкасте, они в одном широковещательном домене

*Приведите ответы на вопросы в свободной форме.*

P.S. в текстовике опечатки в команде network 
