# Домашнее задание к занятию «2.1. Системы хранения данных (СУБД)»

## Студент: Литовка Иван  

В качестве результата отправьте ответы на вопросы в личном кабинете студента на сайте [netology.ru](https://netology.ru).


## Задание «PostgreSQL Authentication»



#### Часть 1. Настройки по умолчанию.

Изучите файл `/var/lib/postgresql/data/pg_hba.conf` и ответьте на вопросы, используя команду получения shell.
1. Какие методы аутентификации используются для подключения по TCP/IP с адресов 127.0.0.1/32 и ::1/128?

Используется метод trust

2. Какие методы аутентификации используются для подключения по TCP/IP со всех остальных адресов, кроме указанных в предыдущем пункте по протоколу?

Для других IP-адресов аутенфикация не определена.   

Изучите настройки ролей, хранящихся в БД и ответьте на вопросы.
1. Верно ли утверждение: пароль роли `app` хранится в виде `функция_хеширования password` (пароль хранится в поле `rolpassword`)? Если неверно, то дайте описание алгоритма, который используется для хранения хеша.

Пароль храниться в виде md5-хэша   

2. Какое значение имеют поля `rolsuper`, `rolcreaterole`, `rolcreatedb`, `rolbypassrls` с указанием назначения данных столбцов? `t` будет означать «да», `f` — «нет». См. https://postgrespro.ru/docs/postgresql/12/catalog-pg-authid. 

для ПОльзователя app данные поля поределены как true

#### Часть 2. Изменение метода аутентификации.

Ответьте на вопрос: почему значения полей `rolcanlogin` и `rolpassword` для роли `app` не изменились, и вы по-прежнему можете подключиться с помощью `psql` без указания пароля, хотя в `pg_hba.conf` для `host all all all` указано `reject`?

Потому что пользователь app проходит проверку по правилу local, а дальше можно и не смотреть.  

## Задание «CIS PostgreSQL Benchmarks»

Изучите [CIS Benchmarks](https://www.cisecurity.org/cis-benchmarks/) на СУБД PostgreSQL v12, а именно `Ensure login via "host" TCP/IP Socket is configured correctly`.

Пришлите в личном кабинете студента ответы на вопросы.
1. Какие методы **не рекомендуется** использовать для удалённых подключений?

Не рекомендуются: trust, password, ident, md5


2. Какие методы **рекомендуется** использовать для удалённых подключений?

gss, sspi, pam, ldap, radius, cert

## Задание «PostgreSQL ПРД»

### Результаты выполнения задания

Отправьте в личном кабинете студента сообщение, которое отображается вместо `???` в результате выполнения запросов с недостаточными правами доступа: `ERROR:  ???`.

**Получаем сообщение об отсутствии прав**
```
ERROR:  permission denied for table records
```   


## Дополнительные материалы

К этим материалам вы вернётесь во время обучения курса, но уже сейчас можете их почитать:
1. [Row-Level Security](https://postgrespro.ru/docs/postgresql/12/ddl-rowsecurity).
12. [Шифрование данных](https://postgrespro.ru/docs/postgresql/12/encryption-options).